\newpage
% 1. Разработать технологию тестирования системы
% 2. Разработать технологии развертывания и использования системы

\section{Разработка технологий развертывания и тестирования системы}

Согласно техническому заданию выпускной квалификационной работы бакалавра требуется разработать технологию тестирования работы системы, а также выполнить комплекс проверок для интеграции программной и аппаратной частей.
Это позволяет убедиться в корректности обмена данными между мобильным приложением, считывателем бесконтактных карт и сервером банка-эквайера.

\subsection{Технология тестирования работы системы}
Технология тестирования разработанной программно-аппаратной системы включает последовательность действий, направленных на проверку основных функциональных модулей:

\begin{itemize}
	\item Подключение к считывателю по Bluetooth;
	\item Активация и взаимодействие с NFC-картой;
	\item Обмен APDU-командами;
	\item Интеграция с сервером банка через REST API;
	\item Обработка ошибок и отображение результатов транзакции пользователю.
\end{itemize}

Для реализации технологии тестирования были определены следующие этапы:

\begin{enumerate}
	\item подготовка макета устройства и установка прошивки — включает загрузку актуальной версии ПО на микроконтроллер и проверку его запуска;
	\item настройка среды эмуляции платежной транзакции — имитируется поведение терминала и сервера банка, чтобы протестировать все возможные сценарии: успех, ошибка связи, некорректный UID, неверная криптограмма, блокировка карты и другие;
	\item проверка интеграции с мобильным приложением — выполняется полный цикл тестирования от подключения к устройству до получения результата операции;
	\item отладка и анализ логов — используется система логирования (Logcat для Android, Serial Monitor для микроконтроллера), чтобы выявить возможные проблемы на уровне протоколов и интерфейсов.
\end{enumerate}

Процесс тестирования представлен в виде алгоритма, включающего три основных режима:

\begin{itemize}
	\item модульное тестирование компонентов (отдельные модули ПО и аппаратуры);
	\item интеграционное тестирование — проверка взаимодействия между мобильным приложением, считывателем и сервером;
	\item системное тестирование — полный сценарий использования системы от авторизации пользователя до завершения транзакции.
\end{itemize}

\subsection{Тестирование аппаратной части системы}
В рамках данной ВКР был создан макет устройства, реализующий следующие функции:

\begin{itemize}
	\item чтение данных с бесконтактной карты по стандартам ISO/IEC 14443--3 и ISO/IEC 14443--4;
	\item передача данных на мобильное приложение по каналу Bluetooth;
	\item инициализация транзакции и генерация управляющих команд;
	\item защита передаваемых данных с использованием сессионных ключей и шифрования.
\end{itemize}

Для автоматизации тестирования и активации аппаратной части системы был реализован скрипт, представленный на листинге~\ref{code:update_firmware}, принимающий параметры:

\begin{itemize}
	\item адрес NFC-ридера;
	\item режим тестирования (NFC / Bluetooth / Power);
	\item количество повторов.
\end{itemize}


\begin{singlespacing}
	\small
	\captionsetup{labelsep=endash, justification=raggedright, singlelinecheck=off}
	\lstinputlisting[language=bash, label=code:update_firmware, caption={Скрипт обновления прошивки МК}]{code/test.sh}
\end{singlespacing}


Этот скрипт позволяет провести серию тестов, сохраняя результаты в JSON-файл, который затем может быть использован для анализа надёжности и производительности.



\subsection{Тестирование программной части системы}
Мобильное приложение, реализованное под ОС Android, было протестировано на корректность выполнения следующих функций:

\begin{itemize}
\item Авторизация пользователя;
\item Подключение к считывателю;
\item Формирование запроса на оплату;
\item Отправка данных через REST API;
\item Обработка ответов от сервера и отображение результата.
\end{itemize}

Был разработан набор автономных тестовых сценариев , использующих Mock-объекты и подмену ответов от сервера , чтобы проверить все варианты развития транзакции без прямого доступа к реальному банку.


Для упрощения тестирования и отладки была создана демонстрационная среда , в которую входят:

\begin{itemize}
	\item скрипты эмуляции ответов от сервера эквайера;
	\item утилиты Bluetooth- и NFC-тестирования.
\end{itemize}

\subsection{Интеграционное тестирование программной и аппаратной частей}
\label{subsec:test_integr}
Для проверки интеграции программной и аппаратной частей системы был разработан полный сценарий тестирования, включающий:

\begin{enumerate}
	\item включение устройства и его инициализация;
	\item поиск и подключение через Bluetooth к считывателю;
	\item ввод суммы и запуск транзакции;
	\item считывание UID, активация карты и обмен APDU-командами;
	\item передача данных на сервер;
	\item получение ответа и отображение результата пользователю.
\end{enumerate}

Все эти этапы были протестированы в различных условиях:

\begin{itemize}
	\item при слабом сигнале Bluetooth;
	\item при отсутствии или плохом качестве соединения с сервером.
\end{itemize}

В результате тестирования не выявлено критических ошибок, связанных с потерей данных или нарушением целостности транзакции.
Все этапы обмена данными между программной и аппаратной частью выполняются корректно и соответствуют требованиям безопасности, установленными в техническом задании.






%
%\vspace{2mm}
%В результате выполнения технологической части разработки системы были разработаны технологии:
%\begin{enumerate}
%	\item развертывания и использования системы~--- на их основе было создано руководство по эксплуатации системы (приложение Д);
%	\item тестирования системы~--- на основе данной технологии были определены цели, а также методы тестирования компонентов системы и проведено ее тестирования, результаты которого описаны в предыдущей главе.
%\end{enumerate}
